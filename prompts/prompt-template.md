# セクション鍵HTML 生成プロンプト（VS Code用・ファイル生成）

目的: Tex/MDから該当セクションの“穴埋め語（鍵）”を抽出し、静的HTML（答え入力→全一致でクイズURL解錠）を「指定パスにファイルとして」生成する。

---

## 入力（私が最初に貼るもの）

- 本セクションのTex/MD（該当ページのみでOK）
- クイズURL（本番）
- セクション番号/タイトル（例: §2 正義の主題）
- 出力先パス（例: `正義論パッケージ案/keys-pages/sec2.html`）
- 公開URL（鍵ページの絶対URL。QR生成に使用。例: `https://<user>.github.io/<repo>/keys-pages/sec2.html`）
- 印刷用MDの出力先パス（例: `正義論パッケージ案/keys-pages/sec2-cover.md`）

## モデルへの指示（Copilotにコピペ）

以下を厳守して処理してください。

1. 目的と役割

	- 学生向け“鍵ページ”。5〜7語の穴埋め語を入力→全一致でクイズURLを表示。
	- チャット欄にHTML全文を貼らず、指定の出力先パスに「ファイルとして」生成する。

1. 入力の利用と鍵の抽出

	- 添付/指定のTexやMDから、該当セクションの穴埋め語（\anaumezidou{...} の語、または箇条書き要点の名詞句）を5〜7語抽出。
	- 各語について、日本語の主要形＋英語/読みの正規化形（half width, lower, 記号除去）の受理配列 `accepts` を作成。

1. HTML仕様（生成物の要件）

	- 単一HTML、外部依存なし、レスポンシブ。
	- 入力正規化（全角→半角/小文字化/空白・記号除去）で完全一致判定。
	- 進捗表示（OK数/プログレスバー）と下書き保存（localStorage）。
	- 全一致で「クイズを開く」ボタンを表示。`QUIZ_URL` は指定URLに設定。
	- `const KEYS = [{ id, label, accepts[], placeholder }]` の配列で鍵を定義。

1. 出力先と命名

	- 出力先パス: 私が指定した `keys-pages/` 配下（例: `正義論パッケージ案/keys-pages/sec2.html`）。
	- 既存の場合は上書き保存。生成後にそのファイルをエディタで開く。
	- 併せて、印刷用のMarkdownカバーページを作成する（例: `正義論パッケージ案/keys-pages/sec2-cover.md`）。

1. 印刷用カバーページ（Markdown）の生成

	- 目的: A4 1ページに収め、配布/印刷/スキャン共有に使える表紙を作る。
	- 構成（目安）:
		- タイトル（セクション番号/範囲を明記。例: `§2 正義の主題 — 学習カバー`）。
		- 本日のミッション（例: 穴埋め→鍵入力→クイズ 15分）。
		- 鍵ページのリンク（テキストURLも併記）。
		- QRコード（鍵ページURL）。
	- レイアウト:
		
		- 画像はHTMLタグでサイズ指定（例: `<img src="..." width="240" />`）。
	- QRコード画像:
		- 生成サービスを利用（例: `https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=<URLエンコードした絶対URL>`）。
		- 画像の下に対応するテキストURLも記載（印刷時の保険）。
		- ダミーでもよい
	- 用紙想定:
		- A4縦1ページに収めるため、文章は簡潔に。余白を意識し、見出しは1つまで。
	- 出力:
		- 指定の「印刷用MDの出力先パス」に保存し、ファイルを開く。

2. 応答フォーマット

	- 成功時: 「Created: <相対パス>」のみ簡潔に返す（余計な本文やHTMLは出力しない）。
	- 必須情報が欠ける場合のみ、何が不足かを1行で質問する。

---

## 例（貼り方）

- セクション: §2 正義の主題
- クイズURL: <https://example.com/quiz/rawls/section2>
- 出力先: 正義論パッケージ案/keys-pages/sec2.html
- 鍵ページ公開URL: <https://<user>.github.io/<repo>/keys-pages/sec2.html>
- 印刷用MD出力先: 正義論パッケージ案/keys-pages/sec2-cover.md
- 添付: そのセクションのTex/MD本文
- 実行プロンプト: 上の「モデルへの指示」をコピペし、上記を明示して渡す
